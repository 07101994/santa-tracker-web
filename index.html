<!DOCTYPE html>
<html lang="en" itemscope="itemscope" itemtype="http://schema.org/WebPage">
<head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <title>Google Santa Tracker</title>
  <meta property="og:image" itemprop="image" name="thumbnail" content="images/apple-touch-icon-144x144-precomposed.png">
  <meta name="description" content="Use Google Santa Tracker to follow Santa Claus on Google Maps as he makes his journey around the world.">

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800|Lobster|Roboto&subset=all">
  <link rel="stylesheet" href="sass/santatracker.css">

  <!-- app manifest-->
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes"> <!-- fallback -->

  <!-- app status bar themes -->
  <meta name="apple-mobile-web-app-status-bar-style" content="#e51c23">
  <meta name="theme-color" content="#e51c23">
  <meta name="msapplication-TileColor" content="#e51c23">

  <!-- icons -->
  <link rel="apple-touch-icon-precomposed" href="images/apple-touch-icon-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="images/apple-touch-icon-57x57-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/apple-touch-icon-72x72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/apple-touch-icon-114x114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/apple-touch-icon-144x144-precomposed.png">
  <link rel="shortcut icon" href="images/favicon.ico">

  <script src="components/webcomponentsjs/webcomponents.min.js"></script>
  <link rel="import" href="elements/elements_en.html">
</head>
<body unresolved fullbleed>

<template is="auto-binding" id="t">

<santa-app id="santaApp" selectedScene="{{selectedScene}}">

  <!-- Route controller -->
  <flatiron-director route="{{route}}" on-director-route="{{onRouteChange}}" autoHash></flatiron-director>

  <!-- Preloading scene overlay -->
  <preload-overlay value="{{selectedScene.preloadProgress || 0}}"
                   active?="{{selectedScene && !selectedScene.loaded}}"
                   color="{{selectedScene.loadingBgColor}}"
                   src="{{selectedScene.loadingSrc}}"></preload-overlay>

  <lazy-pages id="lazypages" selected="{{route}}" selectedItem="{{selectedScene}}" valueattr="route"
              santaApp="{{$.santaApp}}">
    <!--
      Note: we can data bind on calendar-nav because its definition is loaded
      at pageload. The other scenes are lazy loaded and the bindings would be
      incorrect. mode is bindable on village-scene because it's an
      string (not an object) and the one-way bindings are good with that.
    -->
    <calendar-nav route="calendar" alwaysActive
                  houses="{{$.santaApp.houses}}" santaApp="{{$.santaApp}}"
                  hidden?="{{$.santaApp.mode == 'cast'}}"></calendar-nav>
    <village-scene route="village"
        path="scenes/village/village-scene_en.html" mode="{{$.santaApp.mode}}" hidden></village-scene>
    <airport-scene route="airport"
        path="scenes/airport/airport-scene_en.html" hidden></airport-scene>
    <briefing-scene route="briefing"
        path="scenes/briefing/briefing-scene.html" hidden></briefing-scene>
    <matching-scene route="matching"
        path="scenes/matching/matching-scene_en.html" hidden></matching-scene>
    <workshop-scene route="workshop"
        path="scenes/workshop/workshop-scene.html" hidden></workshop-scene>
    <windtunnel-scene route="windtunnel"
        path="scenes/windtunnel/windtunnel-scene.html" hidden></windtunnel-scene>
    <rollercoaster-scene route="rollercoaster"
        path="scenes/rollercoaster/rollercoaster-scene.html" hidden></rollercoaster-scene>
    <undersea-scene route="undersea"
        path="scenes/undersea/undersea-scene.html" hidden></undersea-scene>
    <traditions-scene route="traditions"
        path="scenes/traditions/traditions-scene_en.html" hidden></traditions-scene>
  </lazy-pages>

</santa-app>

</template>

<div id="preload_placeholder"></div>

<script src="js/santatracker.js"></script>

<!-- TODO(bckenny): remove fro prod. -->
<script>
window.DEV = true;

if (window.DEV) {
  document.addEventListener('HTMLImportsLoaded', function() {
    console.debug('HTMLImportsLoaded @', performance.now(), 'ms');
  });

  document.addEventListener('polymer-ready', function() {
    console.debug('polymer-ready @', performance.now(), 'ms');
  });
} else {
  console.log = function(){};
}
</script>
</body>
</html>
