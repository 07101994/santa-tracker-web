<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/core-range/core-range.html">

<!--
Candy cane progress bar.

@element preload-overlay
@extends core-range
-->
<polymer-element name="preload-overlay" extends="core-range" attributes="active"
                 on-transitionend="{{onTransitionEnd}}" fit>
  <template>
    <!-- TODO: CSS separated because of
         https://github.com/Polymer/polymer/issues/811 -->
    <link rel="stylesheet" href="preloader.css" no-shim>
    <style>
    :host {
      background: #3ec4f0;
      z-index: 1000;
      transition: opacity 500ms ease-out;
      opacity: 0;
      visibility: hidden;
    }
    :host([active]) {
      opacity: 1;
      visibility: visible;
    }
    </style>
    <div id="page-progress" layout vertical center-center>
      <div class="preload">
          <img src="/images/village.gif">
          <div class="preload-bar">
            <div class="preload-progress" style="width:{{ratio}}%;"></div>
          </div>
      </div>
    </div>
  </template>
  <script>
    Polymer({
      publish: {
        /**
         * If `true`, the preloader displays itself. 
         *
         * @attribute active
         * @type bool
         * @default false
         */
        active: {value: false, reflect: true}
      },

      onTransitionEnd: function(e, detail, sender) {
        //this.style.display = 'none';
      }
    });
  </script>
</polymer-element>