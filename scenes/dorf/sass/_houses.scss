// TODO(samthor): Move helper methods somewhere common
@function strip-unit($num) {
  @return $num / ($num * 0 + 1);
}

// Returns the % of $value in $inside. Assumes both are px values.
@function percent($value, $inside) {
  @return #{(strip-unit($value) / strip-unit($inside)) * 100}%;
}

// All dimensions below assume cell size of 320x320 (i.e., $dim-house).

// ID houseWidth houseHeight iceWidth iceHeight houseLeft houseTop iceLeft iceTop dateLeft dateTop labelX labelY zIndex
$houses:
    "airport"         812   179   627   240   -340   44    -175   0     0   0   0   0   $house-row-1-z-index,
    "traditions"      235   222   424   236   35     21    -100   10    0   0   0   0   $house-row-1-z-index,
    "codelab"         277   209   364   284   29     100   -40    55    0   0   0   0   $house-row-1-z-index,
    "app"             280   366   443   351   -29    -11   -81    -3    0   0   0   0   $house-row-2-z-index+50,
    "seasonofcaring"  333   233   373   282   8      0     -56    -31   200 32  0   0   $house-row-2-z-index,
    "santasback"      231   180   499   284   98     23    -53    -30   110 64  0   0   $house-row-2-z-index,
    "santaselfie"     209   262   497   348   81     41    -80    10    0   0   0   0   $house-row-2-z-index+50,
    "translations"    311   174   712   286   5      101   -180   45    0   0   0   0   $house-row-3-z-index+20,
    "callfromsanta"   271   298   537   321   11     0     -120   0     0   0   0   0   $house-row-3-z-index,
    "briefing"        315   246   355   287   0      0     0      0     0   0   0   0   $house-row-3-z-index,
    "presentdrop"     198   278   300   333   85     8     18     -19   0   0   0   0   $house-row-3-z-index,
    "santasearch"     287   174   484   246   30     105   -50    40    0   0   0   0   $house-row-3-z-index,
    "windtunnel"      336   203   537   222   -16    47    -99    58    0   0   0   0   $house-row-4-z-index,
    "racer"           345   259   424   266   -10    57    -104   40    0   0   0   0   $house-row-4-z-index,
    "jamband"         379   250   606   267   -33    -19   -140   36    0   0   0   0   $house-row-4-z-index,
    "gumball"         257   308   374   359   59     -68    -5    -70   0   0   0   0   $house-row-4-z-index,
    "postcard"        286   224   364   248   -17    32    -82    10    0   0   0   0   $house-row-5-z-index,
    "jetpack"         287   258   367   333   20     53    -45    0     0   0   0   0   $house-row-5-z-index+40,
    "boatload"        240   169   472   250   -7     102   -105   61    0   0   0   0   $house-row-5-z-index,
    "mercator"        328   275   462   348   -15    8     -109   -21   0   0   0   0   $house-row-5-z-index,
    "presentbounce"   341   256   521   348   9      47    -110   10    0   0   0   0   $house-row-6-z-index+20,
    "codeboogie"      294   224   403   280   24     30    -31    -5    0   0   0   0   $house-row-6-z-index,
    "elf-car"         307   337   437   354   25     -56   -70    -57   0   0   0   0   $house-row-6-z-index,
    "citylights"      360   311   467   332   -10    0     -34    -10   0   0   0   0   $house-row-6-z-index,
    "commandcentre"   197   215   380   271   104    48    10     40    0   0   0   0   $house-row-7-z-index,
    "seasonofgiving"  390   241   373   282   -59    52    -45    32    0   0   0   0   $house-row-7-z-index,
    "matching"        303   192   457   270   49     36    -58    10    0   0   0   0   $house-row-7-z-index,
    "liftoff"         276   294   355   336   55     37    22     11    0   0   0   0   $house-row-7-z-index;

$idx-id: 1;
$idx-width: 2;
$idx-height: 3;
$idx-iceWidth: 4;
$idx-iceHeight: 5;
$idx-left: 6;
$idx-top: 7;
$idx-iceLeft: 8;
$idx-iceTop: 9;
$idx-dateLeft: 10;
$idx-dateTop: 11;
$idx-labelLeft: 12;
$idx-labelTop: 13;
$idx-zIndex: 14;

#drawer {
  .menucard-village {
    background-image: url(img/menu-village.png);
  }
  .menucard-tracker {
    background-image: url(img/menu-tracker.png);
  }

  @for $i from 1 through length($houses) {
    $house: nth($houses, $i);
    $id: nth($house, $idx-id);

    .menucard-#{$id} {
      background-image: url(img/menu-#{$id}.png);
    }
  }
}

#houses {
  .house {
    .card {
      .image {
        background: center no-repeat;
        background-size: cover;
      }
    }
    .building, .ice {
      background: center no-repeat;
      background-size: contain;
      position: absolute;
    }
  }

  @for $i from 1 through length($houses) {
    $house: nth($houses, $i);
    $id: nth($house, $idx-id);

    .house-#{$id} {
      // z-index set on child .assets, not top-level .house (don't create
      // heirarchy here)

      .assets {
        z-index: nth($house, $idx-zIndex) + (1+($i % 4) * 10);

        .building {
          background-image: url(img/building-#{$id}.svg);
          width: percent(nth($house, $idx-width), $dim-house);
          height: percent(nth($house, $idx-height), $dim-house);
          left: percent(nth($house, $idx-left), $dim-house);
          top: percent(nth($house, $idx-top), $dim-house);
        }

        .ice {
          background-image: url(img/building-#{$id}-ice.svg);
          width: percent(nth($house, $idx-iceWidth), $dim-house);
          height: percent(nth($house, $idx-iceHeight), $dim-house);
          left: percent(nth($house, $idx-iceLeft), $dim-house);
          top: percent(nth($house, $idx-iceTop), $dim-house);
        }

        .launchdate {
          left: percent(nth($house, $idx-dateLeft), $dim-house);
          top: percent(nth($house, $idx-dateTop), $dim-house);
        }
      }

      .link {
        .card {
          .image {
            background-image: url(img/card-#{$id}_2x.png);
          }
        }
      }
    }
  }
}
