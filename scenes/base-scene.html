<!--
Copyright 2015 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->
<link rel="import" href="../components/polymer/polymer.html">

<!--
A base class element for Santa Tracker scenes. Should not be declared directly,
but extended by other elements.

### Scene methods

Subclass scene elements are expected to implement the following methods as needed.
These methods will be called at the appropriate times:

- `onPreload` - called to preload assets. Scenes should call `preloadImages` and/or `preloadSounds` inside this method.
- `onShow` - if applicable, preloading has completed. The scene is revealed.
- `onHide` - the scene is hidden.
- `onPause` - the scene has been paused due to page visibility hidden or window blur. Scenes should use this method to stop animations, sounds, etc.
- `onResume` - the scene has been resumed due to page visibility unhidden or window focus. Scenes should use this method to restart animations, sounds, etc.

### Scene properties

Subclass scene elements can define the following properties:

- `componentDir` - the relative path to the component's root folder from the main app folder (e.g 'scenes/village/').
- `loadingBgColor` - an optional loading screen background color.
- `loadingSrc` - an optional loading screen background image. The path should be relative to the
  component's folder (e.g 'img/loading.gif').
- `sceneParams` - an object of key/value URL params which is set when the route changes. Scenes can use this for deeplinking. Example: /#jamband?band=2,8,-1,1,7,-1 -> {"band": "2,8,-1,1,7,-1"}.

@element base-scene
-->

<!-- Outside base-scene so we don't have to create extra an Shadow DOM. -->
<style shim-shadowdom>
  body /deep/ [alwaysActive] {
    visibility: visible;
    z-index: auto;
  }
</style>

<polymer-element name="base-scene" attributes="active alwaysActive path route mode santaApp loadingBgColor loadingSrc"
                 on-scene-pause="{{handlePause}}" tabindex="0">
<script>
Polymer({

  /**
   * URL params specific to the scene. Subclass scenes can use this property
   * to deeplink into sections of their app.
   *
   * Example: /#jamband?band=2,8,-1,1,7,-1 -> {"band": "2,8,-1,1,7,-1"}.
   *
   * @property sceneParams
   * @type object
   * @default {}
   */
  sceneParams: {},

  ready: function() {
    if (this.loadingSrc) {
      this.loadingSrc = this.componentBaseDir + this.loadingSrc;
    }
  },

});
</script>
</polymer-element>
